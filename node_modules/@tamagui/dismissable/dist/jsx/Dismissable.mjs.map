{"version":3,"names":["useComposedRefs","composeEventHandlers","useEscapeKeydown","useEvent","React","ReactDOM","jsx","dispatchDiscreteCustomEvent","target","event","flushSync","dispatchEvent","DISMISSABLE_LAYER_NAME","CONTEXT_UPDATE","POINTER_DOWN_OUTSIDE","FOCUS_OUTSIDE","originalBodyPointerEvents","DismissableContext","createContext","layers","Set","layersWithOutsidePointerEventsDisabled","branches","Dismissable","forwardRef","props","forwardedRef","disableOutsidePointerEvents","forceUnmount","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss","layerProps","context","useContext","node","setNode","useState","force","composedRefs","node2","Array","from","highestLayerWithOutsidePointerEventsDisabled","slice","highestLayerWithOutsidePointerEventsDisabledIndex","indexOf","index","isBodyPointerEventsDisabled","size","isPointerEventsEnabled","pointerDownOutside","usePointerDownOutside","isPointerDownOnBranch","some","branch","contains","defaultPrevented","focusOutside","useFocusOutside","preventDefault","useEffect","document","body","style","pointerEvents","add","dispatchUpdate","delete","handleUpdate","addEventListener","removeEventListener","ref","display","onFocusCapture","onBlurCapture","onPointerDownCapture","displayName","BRANCH_NAME","DismissableBranch","useRef","current","handlePointerDownOutside","isPointerInsideReactTreeRef","handleClickRef","handlePointerDown","handleAndDispatchPointerDownOutsideEvent","handleAndDispatchCustomEvent","eventDetail","discrete","originalEvent","pointerType","once","timerId","setTimeout","window","clearTimeout","handleFocusOutside","isFocusInsideReactTreeRef","handleFocus","CustomEvent","name","handler","detail","bubbles","cancelable"],"sources":["../../src/Dismissable.tsx"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}